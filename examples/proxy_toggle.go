package main

import (
	"fmt"
	"log"
	"time"

	"github.com/farshadnobody/Rubingo/rubingo"
)

func main() {
	// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
	// Ø³Ø§Ø®Øª Ú©Ù„Ø§ÛŒÙ†Øª Ø¨Ø§ Ù¾Ø±ÙˆÚ©Ø³ÛŒ (Ø§Ù…Ø§ ØºÛŒØ±ÙØ¹Ø§Ù„)
	// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
	client, err := rubingo.NewClient("my_session",
		rubingo.WithProxy("http://user:pass@gate.decodo.com:10001"),
		// Ù¾Ø±ÙˆÚ©Ø³ÛŒ ÙØ¹Ø§Ù„ Ù†ÛŒØ³Øª
	)
	if err != nil {
		log.Fatal(err)
	}

	if err := client.Connect(); err != nil {
		log.Fatal(err)
	}

	if err := client.Start(""); err != nil {
		log.Fatal(err)
	}

	// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
	// Ø§Ø±Ø³Ø§Ù„ Ù¾ÛŒØ§Ù… Ø¨Ø¯ÙˆÙ† Ù¾Ø±ÙˆÚ©Ø³ÛŒ
	// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
	fmt.Println("Ù¾Ø±ÙˆÚ©Ø³ÛŒ ÙØ¹Ø§Ù„ØŸ", client.IsProxyEnabled()) // false

	client.SendMessage(rubingo.SendMessageOptions{
		ObjectGUID: "me",
		Text:       "Ø§ÛŒÙ† Ù¾ÛŒØ§Ù… Ø¨Ø¯ÙˆÙ† Ù¾Ø±ÙˆÚ©Ø³ÛŒ Ø§Ø±Ø³Ø§Ù„ Ø´Ø¯",
	})

	// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
	// ÙØ¹Ø§Ù„ Ú©Ø±Ø¯Ù† Ù¾Ø±ÙˆÚ©Ø³ÛŒ
	// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
	client.EnableProxy()
	fmt.Println("Ù¾Ø±ÙˆÚ©Ø³ÛŒ ÙØ¹Ø§Ù„ØŸ", client.IsProxyEnabled()) // true

	client.SendMessage(rubingo.SendMessageOptions{
		ObjectGUID: "me",
		Text:       "Ø§ÛŒÙ† Ù¾ÛŒØ§Ù… Ø¨Ø§ Ù¾Ø±ÙˆÚ©Ø³ÛŒ Ø§Ø±Ø³Ø§Ù„ Ø´Ø¯ ğŸ”’",
	})

	// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
	// ØªØºÛŒÛŒØ± Ø¢Ø¯Ø±Ø³ Ù¾Ø±ÙˆÚ©Ø³ÛŒ (Ø¨Ø¯ÙˆÙ† Ù†ÛŒØ§Ø² Ø¨Ù‡ EnableProxy Ø¯ÙˆØ¨Ø§Ø±Ù‡)
	// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
	client.SetProxy("socks5://new-proxy:1080")
	fmt.Println("Ù¾Ø±ÙˆÚ©Ø³ÛŒ Ø¬Ø¯ÛŒØ¯ ØªÙ†Ø¸ÛŒÙ… Ø´Ø¯")

	client.SendMessage(rubingo.SendMessageOptions{
		ObjectGUID: "me",
		Text:       "Ø§ÛŒÙ† Ù¾ÛŒØ§Ù… Ø¨Ø§ Ù¾Ø±ÙˆÚ©Ø³ÛŒ Ø¬Ø¯ÛŒØ¯ Ø§Ø±Ø³Ø§Ù„ Ø´Ø¯",
	})

	// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
	// ØºÛŒØ±ÙØ¹Ø§Ù„ Ú©Ø±Ø¯Ù† Ù¾Ø±ÙˆÚ©Ø³ÛŒ
	// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
	client.DisableProxy()
	fmt.Println("Ù¾Ø±ÙˆÚ©Ø³ÛŒ ÙØ¹Ø§Ù„ØŸ", client.IsProxyEnabled()) // false

	// Ø¢Ø¯Ø±Ø³ Ù‡Ù†ÙˆØ² Ø°Ø®ÛŒØ±Ù‡ Ø§Ø³ØªØŒ ÙÙ‚Ø· ØºÛŒØ±ÙØ¹Ø§Ù„ Ø´Ø¯Ù‡
	// Ø¨Ø§ EnableProxy Ø¯ÙˆØ¨Ø§Ø±Ù‡ ÙØ¹Ø§Ù„ Ù…ÛŒâ€ŒØ´ÙˆØ¯

	time.Sleep(time.Second)
	client.Disconnect()
}
